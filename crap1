.PHONY: configfile/tests
configfile/tests: $(patsubst %.cc,%,$(wildcard configfile/tests/*.cc))

TESTS+=$(patsubst %.cc,%,$(wildcard configfile/tests/*.cc))
TESTS+=$(patsubst %.cc,%,$(wildcard crypto/tests/*.cc))

crypto/tests/certtest: LDFLAGS+=-lssl
crypto/tests/cryptotest: LDFLAGS+=-lssl
crypto/tests/md5test: LDFLAGS+=-lssl
crypto/tests/reqtest: LDFLAGS+=-lssl
crypto/tests/ssltest: LDFLAGS+=-lssl
crypto/tests/sslsrvtest: LDFLAGS+=-lssl

dbus/tests: $(patsubst %.cc,%,$(wildcard dbus/tests/*.cc))

TESTS+=$(patsubst %.cc,%,$(wildcard dbus/tests/*.cc))

TARGETS+=examples/wvgrep/wvgrep examples/wvgrep/wvegrep

examples/wvgrep/wvgrep: examples/wvgrep/wvgrep.o $(LIBWVSTREAMS) $(LIBWVUTILS)

examples/wvgrep/wvegrep: examples/wvgrep/wvgrep
	ln -f $< $@

TESTS+=$(filter-out ipstreams/tests/wsd, $(patsubst %.cc,%,$(wildcard ipstreams/tests/*.cc)))
ifneq ("$(with_readline)", "no")
TESTS+=ipstreams/tests/wsd
endif

ipstreams/tests/xplctest: LIBS+=-lxplc-cxx -lxplc
ipstreams/tests/wsd: LIBS+=-lxplc-cxx -lxplc -lreadline

linuxstreams/tests: $(patsubst %.cc,%,$(wildcard linuxstreams/tests/*.cc))

TESTS+=$(patsubst %.cc,%,$(wildcard linuxstreams/tests/*.cc))
